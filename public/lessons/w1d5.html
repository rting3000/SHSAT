<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>W1D5: Inferences & Probability</title>
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;500;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="../css/style.css">
</head>
<body>
    <div class="container">
        <header id="lesson-header"></header>
        <div id="lesson-deck"></div>
        <div id="results-screen" style="display: none;"></div>
    </div>

    <script>
        const lessonData = {
            title: "Mission: Inferences & Probability",
            subtitle: "Week 1, Day 5",
            pointsPerQuestion: 10,
            steps: [
                {
                    type: 'briefing',
                    header: 'Briefing: Reading Between the Lines',
                    content: `
                        <p>Agent, your mission today is about what's NOT said. In ELA, you'll be making <strong>Inferences</strong>, which is figuring out what the author implies but doesn't state directly. In Math, you'll be calculating <strong>Probability</strong>, the likelihood of an event occurring.</p>
                        <ul>
                            <li><strong>Inferences:</strong> Combine clues from the text with your own background knowledge to draw a logical conclusion. If the passage says, "The ground was wet and the sky was dark," you can infer it recently rained.</li>
                            <li><strong>Probability:</strong> The formula is (Number of favorable outcomes) / (Total number of possible outcomes).</li>
                        </ul>
                    `
                },
                // ELA Questions: Making Inferences
                {
                    type: 'mcq',
                    header: 'ELA Challenge 1',
                    prompt: 'What can you infer from this passage?',
                    passage: 'When the music stopped, the room erupted in applause. The pianist stood up from the bench, took a deep bow, and wiped a bead of sweat from his forehead.',
                    options: [
                        'The pianist was unhappy with his performance.',
                        'The audience was required to clap.',
                        'The pianist had put a lot of effort into his performance.',
                        'The room was very cold.'
                    ],
                    correctAnswer: 'The pianist had put a lot of effort into his performance.',
                    explanation: 'The detail about him wiping sweat from his forehead suggests the performance was physically or mentally demanding, allowing us to infer he put in a great deal of effort.'
                },
                {
                    type: 'mcq',
                    header: 'ELA Challenge 2',
                    prompt: 'What can be inferred about Sarah?',
                    passage: 'As soon as the starting pistol fired, Sarah shot off the blocks, leaving the other runners behind. She maintained a blistering pace, her eyes fixed on the finish line, and never once looked back.',
                    options: [
                        'Sarah is not a very good runner.',
                        'Sarah is determined and competitive.',
                        'Sarah did not know there were other people in the race.',
                        'Sarah was running late for an appointment.'
                    ],
                    correctAnswer: 'Sarah is determined and competitive.',
                    explanation: 'Her quick start, "blistering pace," and focus on the finish line are all clues that point to her being a very determined and competitive athlete.'
                },
                {
                    type: 'mcq',
                    header: 'ELA Challenge 3',
                    prompt: 'Based on the passage, what can you infer about the relationship between Tom and the dog?',
                    passage: 'Tom opened the door, and a furry tornado shot past his legs into the yard. He chuckled as he watched the dog, tail wagging furiously, chase a squirrel up a tree. "Alright, Sparky, you win this time," he said with a smile.',
                    options: [
                        'Tom is afraid of the dog.',
                        'The dog is not well-behaved.',
                        'Tom has a fond and playful relationship with his dog.',
                        'Tom does not like squirrels.'
                    ],
                    correctAnswer: 'Tom has a fond and playful relationship with his dog.',
                    explanation: 'Tom\'s chuckle, his smile, and his playful comment to the dog ("you win this time") all suggest a warm and affectionate relationship.'
                },
                {
                    type: 'mcq',
                    header: 'ELA Challenge 4',
                    prompt: 'What can you infer about the setting?',
                    passage: 'The sand was hot under Maria\'s feet as she ran toward the sound of the crashing waves. A salty breeze whipped through her hair, and in the distance, seagulls cried out.',
                    options: [
                        'A desert',
                        'A mountain',
                        'A forest',
                        'A beach'
                    ],
                    correctAnswer: 'A beach',
                    explanation: 'The combination of "hot sand," "crashing waves," "salty breeze," and "seagulls" are all classic indicators of a beach setting.'
                },
                {
                    type: 'mcq',
                    header: 'ELA Challenge 5',
                    prompt: 'What can be inferred about Michael?',
                    passage: 'Michael glanced at his watch for the third time in five minutes. He tapped his foot impatiently and sighed, staring down the empty street.',
                    options: [
                        'Michael is very relaxed.',
                        'Michael is waiting for someone or something that is late.',
                        'Michael does not know how to tell time.',
                        'Michael is enjoying the view.'
                    ],
                    correctAnswer: 'Michael is waiting for someone or something that is late.',
                    explanation: 'Repeatedly checking a watch, tapping one\'s foot, and sighing are all common behaviors associated with waiting impatiently for someone who is late.'
                },
                 {
                    type: 'mcq',
                    header: 'ELA Challenge 6',
                    prompt: 'What can you infer about the new restaurant?',
                    passage: 'The first week it was open, you couldn\'t get a table without a reservation. By the second month, the dining room was half-empty on a Saturday night. Now, the windows are dark and a "For Lease" sign hangs in the window.',
                    options: [
                        'The restaurant became too popular to manage.',
                        'The restaurant moved to a new, better location.',
                        'The restaurant\'s food was excellent.',
                        'The restaurant was initially popular but quickly failed.'
                    ],
                    correctAnswer: 'The restaurant was initially popular but quickly failed.',
                    explanation: 'The passage shows a clear progression: initial success (full), declining popularity (half-empty), and final failure ("For Lease" sign). This allows us to infer a rapid decline.'
                },
                {
                    type: 'mcq',
                    header: 'ELA Challenge 7',
                    prompt: 'What can be inferred about the speaker\'s feelings?',
                    passage: 'My opponent claims he will lower taxes, but he has voted for every tax increase in the last five years. He says he values honesty, but his campaign is funded by the very lobbyists he criticizes.',
                    options: [
                        'The speaker trusts their opponent.',
                        'The speaker believes their opponent is a hypocrite.',
                        'The speaker is confused about their opponent\'s record.',
                        'The speaker wants to raise taxes.'
                    ],
                    correctAnswer: 'The speaker believes their opponent is a hypocrite.',
                    explanation: 'The speaker repeatedly contrasts the opponent\'s words with their actions (e.g., says he wants lower taxes but votes for increases). This highlights a contradiction, implying the opponent is a hypocrite.'
                },
                {
                    type: 'mcq',
                    header: 'ELA Challenge 8',
                    prompt: 'What can you infer about the book?',
                    passage: 'She started reading the book at breakfast, and when her mom called her for dinner, she was surprised to see it was already dark outside. She had finished all 400 pages without even noticing the time pass.',
                    options: [
                        'The book was very difficult to read.',
                        'The book was boring and uninteresting.',
                        'The book was extremely engaging and captivating.',
                        'The book was a short picture book.'
                    ],
                    correctAnswer: 'The book was extremely engaging and captivating.',
                    explanation: 'Losing track of time and reading 400 pages in one sitting are strong indicators that a book is very engrossing and hard to put down.'
                },
                {
                    type: 'mcq',
                    header: 'ELA Challenge 9',
                    prompt: 'What can you infer from the statement?',
                    passage: '"The lawyer confidently presented the DNA evidence, then looked expectantly at the jury."',
                    options: [
                        'The lawyer believes the evidence is weak.',
                        'The lawyer is unsure about the jury\'s role.',
                        'The lawyer believes the DNA evidence strongly supports their case.',
                        'The DNA evidence is complicated.'
                    ],
                    correctAnswer: 'The lawyer believes the DNA evidence strongly supports their case.',
                    explanation: 'Presenting something "confidently" and looking "expectantly" suggests the lawyer believes the evidence is powerful and will convince the jury.'
                },
                {
                    type: 'mcq',
                    header: 'ELA Challenge 10',
                    prompt: 'What can be inferred about the weather?',
                    passage: 'The campers zipped up their jackets, pulled their hats down over their ears, and huddled closer to the crackling fire.',
                    options: [
                        'It is a warm summer evening.',
                        'It is daytime and sunny.',
                        'It is cold.',
                        'It is about to rain.'
                    ],
                    correctAnswer: 'It is cold.',
                    explanation: 'Zipping up jackets, wearing hats over ears, and huddling near a fire are all actions people take to stay warm, allowing us to infer that the weather is cold.'
                },

                // Math Questions: Probability
                {
                    type: 'grid-in',
                    header: 'Math Challenge 1',
                    prompt: 'A standard six-sided die is rolled. What is the probability of rolling an even number?',
                    passage: 'Express your answer as a simple fraction (e.g., 1/2).',
                    correctAnswer: '1/2',
                    explanation: 'There are 6 possible outcomes (1, 2, 3, 4, 5, 6). The favorable outcomes (even numbers) are 2, 4, and 6. So there are 3 favorable outcomes. The probability is 3/6, which simplifies to 1/2.'
                },
                {
                    type: 'mcq',
                    header: 'Math Challenge 2',
                    prompt: 'A bag contains 5 red marbles, 3 blue marbles, and 2 green marbles. What is the probability of NOT drawing a red marble?',
                    passage: '',
                    options: ['1/2', '3/10', '7/10', '1/5'],
                    correctAnswer: '1/2',
                    explanation: 'The total number of marbles is 5 + 3 + 2 = 10. The number of non-red marbles is 3 (blue) + 2 (green) = 5. So, the probability is 5/10, which simplifies to 1/2.'
                },
                {
                    type: 'grid-in',
                    header: 'Math Challenge 3',
                    prompt: 'A deck of 52 cards is shuffled. What is the probability of drawing a King?',
                    passage: 'Express your answer as a simple fraction (e.g., 1/13).',
                    correctAnswer: '1/13',
                    explanation: 'There are 4 Kings in a standard 52-card deck. The probability is 4/52. Both numbers are divisible by 4, so it simplifies to 1/13.'
                },
                {
                    type: 'grid-in',
                    header: 'Math Challenge 4',
                    prompt: 'If you flip a fair coin twice, what is the probability of getting heads both times?',
                    passage: 'Express your answer as a fraction (e.g., 1/4).',
                    correctAnswer: '1/4',
                    explanation: 'The probability of getting heads on one flip is 1/2. To find the probability of two independent events, you multiply their probabilities: (1/2) * (1/2) = 1/4.'
                },
                {
                    type: 'mcq',
                    header: 'Math Challenge 5',
                    prompt: 'A spinner is divided into 8 equal sections, numbered 1 through 8. What is the probability of spinning a number less than 4?',
                    passage: '',
                    options: ['1/2', '1/4', '3/8', '1/8'],
                    correctAnswer: '3/8',
                    explanation: 'The numbers less than 4 are 1, 2, and 3. That makes 3 favorable outcomes out of 8 total possible outcomes. The probability is 3/8.'
                },
                {
                    type: 'mcq',
                    header: 'Math Challenge 6',
                    prompt: 'In a class of 30 students, 18 are girls. If a student is chosen at random, what is the probability that the student is a boy?',
                    passage: '',
                    options: ['3/5', '2/5', '1/2', '12/30'],
                    correctAnswer: '2/5',
                    explanation: 'If there are 18 girls, then there are 30 - 18 = 12 boys. The probability of picking a boy is 12/30. Both numbers are divisible by 6, which simplifies the fraction to 2/5.'
                },
                {
                    type: 'grid-in',
                    header: 'Math Challenge 7',
                    prompt: 'A box contains 20 apples, 5 of which are bruised. What is the probability of picking an apple that is NOT bruised?',
                    passage: 'Express your answer as a percentage.',
                    correctAnswer: '75',
                    explanation: 'The number of non-bruised apples is 20 - 5 = 15. The probability is 15/20. To convert this to a percentage, you can simplify it to 3/4, which is 75%.'
                },
                {
                    type: 'mcq',
                    header: 'Math Challenge 8',
                    prompt: 'A number from 1 to 10 (inclusive) is chosen at random. What is the probability that the number is a prime number?',
                    passage: '',
                    options: ['1/2', '3/10', '2/5', '1/5'],
                    correctAnswer: '2/5',
                    explanation: 'The prime numbers between 1 and 10 are 2, 3, 5, and 7. (Note: 1 is not prime). That is 4 favorable outcomes out of 10 total numbers. The probability is 4/10, which simplifies to 2/5.'
                },
                {
                    type: 'grid-in',
                    header: 'Math Challenge 9',
                    prompt: 'A weather forecast says there is a 40% chance of rain. What is the probability that it will NOT rain?',
                    passage: 'Express your answer as a percentage.',
                    correctAnswer: '60',
                    explanation: 'The total probability of all outcomes is 100%. If the chance of rain is 40%, the chance of no rain is 100% - 40% = 60%.'
                },
                {
                    type: 'grid-in',
                    header: 'Math Challenge 10',
                    prompt: 'You roll two standard six-sided dice. What is the probability that the sum of the numbers is 12?',
                    passage: 'Express your answer as a fraction.',
                    correctAnswer: '1/36',
                    explanation: 'When rolling two dice, there are 6 * 6 = 36 possible outcomes. The only way to get a sum of 12 is by rolling a 6 on both dice. This is only one possible outcome. So, the probability is 1/36.'
                }
            ]
        };

        // Standard lesson engine script
        document.addEventListener('DOMContentLoaded', () => {
            const lessonHeader = document.getElementById('lesson-header');
            const lessonDeck = document.getElementById('lesson-deck');
            const resultsScreen = document.getElementById('results-screen');
            let currentStep = 0;
            let score = 0;
            let questionsAnswered = 0;

            function startLesson() {
                lessonHeader.innerHTML = `<h1>${lessonData.title}</h1><p>${lessonData.subtitle}</p>`;
                showStep(currentStep);
            }

            function showStep(stepIndex) {
                const step = lessonData.steps[stepIndex];
                if (!step) return;

                const card = document.createElement('div');
                card.className = 'card active';

                let content = `<div class="card-header"><h2>${step.header || ''}</h2></div>`;
                
                if (step.type === 'briefing') {
                    content += `<div class="card-content">${step.content}</div>`;
                    content += `<div class="card-actions"><button id="next-btn">Start Mission</button></div>`;
                } else {
                    questionsAnswered++;
                    const progress = Math.round(((questionsAnswered -1) / (lessonData.steps.length -1)) * 100);
                    content += `<div class="progress-bar-container"><div class="progress-bar" style="width: ${progress}%"></div></div>`;
                    content += `<div class="card-content">`;

                    if (step.passage) {
                        content += `<p class="passage">${step.passage}</p>`;
                    }

                    content += `<p class="prompt">${step.prompt}</p>`;

                    if (step.type === 'mcq') {
                        content += `<div class="options">`;
                        step.options.forEach((option) => {
                            content += `<button class="option-btn" data-answer="${option}">${option}</button>`;
                        });
                        content += `</div>`;
                    } else if (step.type === 'grid-in') {
                        content += `<div class="grid-in-container"><input type="text" id="grid-in-input" class="grid-in-input"><button id="submit-grid-in">Submit</button></div>`;
                    }
                    content += `</div><div class="feedback" style="display: none;"></div>`;
                }
                
                card.innerHTML = content;
                lessonDeck.innerHTML = '';
                lessonDeck.appendChild(card);

                if (step.type === 'briefing') {
                    document.getElementById('next-btn').addEventListener('click', () => {
                        currentStep++;
                        showStep(currentStep);
                    });
                } else {
                    if (step.type === 'mcq') {
                        document.querySelectorAll('.option-btn').forEach(btn => {
                            btn.addEventListener('click', (e) => handleAnswer(e.target.dataset.answer, step, e.target.parentElement));
                        });
                    } else if (step.type === 'grid-in') {
                        document.getElementById('submit-grid-in').addEventListener('click', () => {
                            const userAnswer = document.getElementById('grid-in-input').value;
                            handleAnswer(userAnswer, step, document.querySelector('.grid-in-container'));
                        });
                    }
                }
            }

            function handleAnswer(userAnswer, step, container) {
                const feedbackDiv = container.parentElement.querySelector('.feedback');
                const isCorrect = userAnswer.trim().toLowerCase() === step.correctAnswer.trim().toLowerCase();
                
                if (isCorrect) {
                    score += lessonData.pointsPerQuestion;
                    feedbackDiv.innerHTML = `<p class="correct"><strong>Correct!</strong> ${step.explanation}</p>`;
                } else {
                    feedbackDiv.innerHTML = `<p class="incorrect"><strong>Incorrect.</strong> The correct answer is <strong>${step.correctAnswer}</strong>. ${step.explanation}</p>`;
                }
                
                container.querySelectorAll('button, input').forEach(el => el.disabled = true);
                feedbackDiv.style.display = 'block';

                const nextButton = document.createElement('button');
                nextButton.innerText = 'Next';
                nextButton.className = 'next-btn';
                feedbackDiv.appendChild(nextButton);
                
                nextButton.addEventListener('click', () => {
                    currentStep++;
                    if (currentStep < lessonData.steps.length) {
                        showStep(currentStep);
                    } else {
                        showResults();
                    }
                });
            }

            function showResults() {
                localStorage.setItem('w1d5-complete', 'true');
                const totalPossibleScore = (lessonData.steps.length - 1) * lessonData.pointsPerQuestion;
                const percentage = Math.round((score / totalPossibleScore) * 100);
                
                resultsScreen.innerHTML = `
                    <div class="card">
                        <div class="card-header"><h2>Mission Complete!</h2></div>
                        <div class="card-content">
                            <p>Your Score: ${score} / ${totalPossibleScore}</p>
                            <p>Accuracy: ${percentage}%</p>
                            <a href="../index.html" class="button">Return to Dashboard</a>
                        </div>
                    </div>
                `;
                lessonDeck.style.display = 'none';
                resultsScreen.style.display = 'block';
            }

            startLesson();
        });
    </script>
</body>
</html>